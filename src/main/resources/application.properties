# ==============================================================
# CONFIGURACION DEL SERVIDOR Y APP
# ==============================================================
spring.application.name=farmatodo-challenge
server.port=8080

# ==============================================================
# BASE DE DATOS (PostgreSQL)
# ==============================================================
spring.datasource.url=jdbc:postgresql://localhost:5433/farmatodo_db
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuracion JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false

# ==============================================================
# CONFIGURACION DE EJECUCION ASINCRONA
# ==============================================================
# Para el historial de busquedas sin bloquear el hilo principal
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=25

# ==============================================================
# SEGURIDAD (API Keys & Encriptacion)
# ==============================================================
app.security.api-key-header=X-API-KEY
app.security.api-key-secret=farmatodo-secret-key-2025
# Clave AES de 16 bytes para encriptar tarjetas
app.security.encryption-key=1234567890123456

# ==============================================================
# REGLAS DE NEGOCIO (Configurables segun requerimientos)
# ==============================================================

# 1. Tokenizacion: Probabilidad de rechazo (0.0 a 1.0)
app.business.tokenization.rejection-probability=0.1

# 2. Productos: Stock minimo para visualizarse
app.business.product.min-stock-display=3

# 3. Pagos: Probabilidad de rechazo simulada
app.business.payment.rejection-probability=0.1

# 4. Pagos: Cantidad de reintentos automaticos
app.business.payment.max-retries=4

# ==============================================================
# CONFIGURACIoN DE EMAIL (SMTP)
# ==============================================================
# Si corres la app desde tu IDE (IntelliJ/Eclipse), usa localhost.
# Si la app corre DENTRO de Docker, usa "mailpit" como host.
#spring.mail.host=localhost
#spring.mail.port=1025
#spring.mail.username=null
#spring.mail.password=null
#spring.mail.properties.mail.smtp.auth=false
#spring.mail.properties.mail.smtp.starttls.enable=false

# Configuracion Directa con GMAIL
#spring.mail.host=smtp.gmail.com
#spring.mail.port=587
#spring.mail.username=${SPRING_MAIL_USERNAME}
#spring.mail.password=${SPRING_MAIL_PASSWORD}

spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# --- Configuracion de Mailjet (API) ---
mailjet.api.key=${MAILJET_API_KEY}
mailjet.secret.key=${MAILJET_SECRET_KEY}

# Remitente
mail.from.email=${MAIL_FROM_MAIL}