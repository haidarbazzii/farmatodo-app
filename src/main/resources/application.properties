# ==============================================================
# CONFIGURACION DEL SERVIDOR Y APP
# ==============================================================
spring.application.name=farmatodo-challenge
server.port=8080

# ==============================================================
# BASE DE DATOS (PostgreSQL) [cite: 101]
# ==============================================================
spring.datasource.url=jdbc:postgresql://localhost:5433/farmatodo_db
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuracion JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false

# ==============================================================
# CONFIGURACION DE EJECUCION ASINCRONA [cite: 22]
# ==============================================================
# Para el historial de busquedas sin bloquear el hilo principal
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=25

# ==============================================================
# SEGURIDAD (API Keys & Encriptacion) [cite: 39, 40]
# ==============================================================
app.security.api-key-header=X-API-KEY
app.security.api-key-secret=farmatodo-secret-key-2025
# Clave AES de 16 bytes para encriptar tarjetas
app.security.encryption-key=1234567890123456

# ==============================================================
# REGLAS DE NEGOCIO (Configurables segun requerimientos)
# ==============================================================

# 1. Tokenizacion: Probabilidad de rechazo (0.0 a 1.0) [cite: 12]
app.business.tokenization.rejection-probability=0.1

# 2. Productos: Stock minimo para visualizarse [cite: 23]
app.business.product.min-stock-display=0

# 3. Pagos: Probabilidad de rechazo simulada [cite: 28]
app.business.payment.rejection-probability=0.1

# 4. Pagos: Cantidad de reintentos automaticos [cite: 29]
app.business.payment.max-retries=4

# ==============================================================
# CONFIGURACIoN DE EMAIL (SMTP)
# ==============================================================
# Si corres la app desde tu IDE (IntelliJ/Eclipse), usa localhost.
# Si la app corre DENTRO de Docker, usa "mailpit" como host.
#spring.mail.host=localhost
#spring.mail.port=1025
#spring.mail.username=null
#spring.mail.password=null
#spring.mail.properties.mail.smtp.auth=false
#spring.mail.properties.mail.smtp.starttls.enable=false

# Configuración Directa con GMAIL
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=haidarbazzi4@gmail.com
# Aquí pegas la clave de 16 letras que te dio Google (sin espacios)
spring.mail.password=${SPRING_MAIL_PASSWORD}

spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true